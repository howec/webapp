{"ast":null,"code":"var _jsxFileName = \"/Users/howe/Desktop/webapp/Client/src/pages/landing/subpages/Login.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport GoogleLogin from 'react-google-login'; // import { Button, Form, Col, FormGroup, Checkbox } from 'react-bootstrap'\n\nimport Form from 'react-bootstrap/Form';\nimport { Button } from 'react-bootstrap';\nimport socket from '../../../components/SocketUser';\nimport { Column, Row } from 'simple-flexbox';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.responseGoogleFail = response => {\n      console.log(\"FAILED TO SIGN IN. \" + JSON.stringify(response));\n    };\n\n    this.responseGoogleSucceed = response => {\n      console.log(\"Succeeded signing in! \" + JSON.stringify(response));\n      console.log(response);\n      this.props.onSignIn(response);\n    };\n\n    this.sendLogin = event => {\n      event.preventDefault();\n      let email = document.getElementById('formEmail').value;\n      let password = document.getElementById('formPassword').value;\n      socket.emit(\"loginSubmitted\", {\n        workspace: this.state.workspace,\n        group: this.state.group,\n        email: email,\n        password: password\n      });\n      socket.on('loginValidation', arg => {\n        if (arg.valid == true) {\n          this.props.setGroupApp(this.state.group);\n          this.props.setData(arg.data);\n        } else {\n          this.setState({\n            valid: false\n          });\n        }\n      });\n    };\n\n    this.sendWorkspace = event => {\n      event.preventDefault();\n      let workspace = document.getElementById('formWorkspace').value;\n      socket.emit(\"workspaceSubmitted\", {\n        workspace: workspace\n      }); //assuming that the validation function actually works...\n\n      socket.on('workspaceValidation', arg => {\n        if (arg.valid == true) {\n          this.setState({\n            workspace: workspace,\n            valid: true,\n            step: \"LoginAs\"\n          });\n        } else {\n          this.setState({\n            valid: false\n          });\n        }\n      });\n    };\n\n    this.workspaceError = () => {\n      if (this.state.valid != false) {\n        return null;\n      }\n\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"#CD5C5C\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"That workspace doesn't exist!\")));\n    };\n\n    this.loginError = () => {\n      if (this.state.valid != false) {\n        return null;\n      }\n\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"#CD5C5C\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Incorrect login credentials!\")));\n    };\n\n    this.setGroupStaff = () => {\n      this.setState({\n        group: \"Staff\",\n        step: \"Staff\"\n      });\n    };\n\n    this.setGroupStudents = () => {\n      this.setState({\n        group: \"Students\",\n        step: \"Students\"\n      });\n    };\n\n    this.setGroupPartners = () => {\n      this.setState({\n        group: \"Partners\",\n        step: \"Partners\"\n      });\n    };\n\n    this.state = {\n      valid: null,\n      step: null,\n      workspace: null,\n      group: null\n    };\n  }\n\n  render() {\n    if (this.state.step == null) {\n      return React.createElement(\"div\", {\n        className: \"center-me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(Column, {\n        horizontal: \"center\",\n        flexGrow: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Login to your workspace\")), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.sendWorkspace,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formWorkspace\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Workspace name\"), React.createElement(Form.Control, {\n        required: true,\n        type: \"text\",\n        placeholder: \"Enter workspace name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), this.workspaceError(), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Go!\")), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(GoogleLogin, {\n        clientId: \"273539098251-5nhctai82l0ram9s38gkp7s22ahc4lui.apps.googleusercontent.com\",\n        buttonText: \"Login with Google\",\n        onSuccess: this.responseGoogleSucceed,\n        onFailure: this.responseGoogleFail,\n        cookiePolicy: 'single_host_origin',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }))))));\n    } else if (this.state.step == \"LoginAs\") {\n      return React.createElement(\"div\", {\n        className: \"center-me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Column, {\n        flexGrow: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \" Which are you logging in as? \")), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.setGroupStaff,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Staff\")), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.setGroupPartners,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Partner\")), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.setGroupStudents,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Student\"))));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"center-me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Column, {\n        horizontal: \"center\",\n        flexGrow: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, this.state.group)), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.sendLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Email address\"), React.createElement(Form.Control, {\n        required: true,\n        type: \"email\",\n        placeholder: \"Enter email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Form.Control, {\n        required: true,\n        type: \"password\",\n        placeholder: \"Enter password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      })), this.loginError(), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Login!\")), React.createElement(Row, {\n        horizontal: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"lightgray\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"-OR-\")))), React.createElement(GoogleLogin, {\n        clientId: \"273539098251-5nhctai82l0ram9s38gkp7s22ahc4lui.apps.googleusercontent.com\",\n        buttonText: \"Login with Google\",\n        onSuccess: this.responseGoogleSucceed,\n        onFailure: this.responseGoogleFail,\n        cookiePolicy: 'single_host_origin',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })))));\n    }\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/howe/Desktop/webapp/Client/src/pages/landing/subpages/Login.js"],"names":["React","Component","ReactDOM","GoogleLogin","Form","Button","socket","Column","Row","Login","constructor","props","responseGoogleFail","response","console","log","JSON","stringify","responseGoogleSucceed","onSignIn","sendLogin","event","preventDefault","email","document","getElementById","value","password","emit","workspace","state","group","on","arg","valid","setGroupApp","setData","data","setState","sendWorkspace","step","workspaceError","loginError","setGroupStaff","setGroupStudents","setGroupPartners","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport GoogleLogin from 'react-google-login';\n\n// import { Button, Form, Col, FormGroup, Checkbox } from 'react-bootstrap'\nimport Form from 'react-bootstrap/Form'\nimport { Button} from 'react-bootstrap';\n\nimport socket from '../../../components/SocketUser';\nimport { Column, Row } from 'simple-flexbox';\n\n\nclass Login extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {valid: null, step: null, workspace: null, group: null}\n  }\n\n  responseGoogleFail = (response) => {\n    console.log(\"FAILED TO SIGN IN. \" + JSON.stringify(response));\n  }\n\n  responseGoogleSucceed = (response) => {\n    console.log(\"Succeeded signing in! \" + JSON.stringify(response));\n    console.log(response);\n\n    this.props.onSignIn(response);\n  }\n\n\n\n  sendLogin = (event) =>{\n    event.preventDefault();\n\n    let email = document.getElementById('formEmail').value;\n    let password = document.getElementById('formPassword').value;\n    socket.emit(\"loginSubmitted\", {workspace: this.state.workspace, group: this.state.group, email: email, password: password});\n  \n    socket.on('loginValidation', (arg) => {\n      if(arg.valid == true){\n        this.props.setGroupApp(this.state.group);\n        this.props.setData(arg.data);\n      } else{\n        this.setState({valid: false});\n      }\n    });\n  }\n\n  sendWorkspace = (event) =>{\n    event.preventDefault();\n    \n    let workspace = document.getElementById('formWorkspace').value;\n    socket.emit(\"workspaceSubmitted\", {workspace: workspace});\n  \n    //assuming that the validation function actually works...\n    socket.on('workspaceValidation', (arg) => {\n      if(arg.valid == true){\n        this.setState({workspace: workspace, valid: true, step: \"LoginAs\"});\n      } else{\n        this.setState({valid: false});\n      }\n    });\n  }\n\n  workspaceError = () => {\n    if(this.state.valid != false){\n      return null;\n    }\n    return (<p><i><font color=\"#CD5C5C\">That workspace doesn't exist!</font></i></p>);\n  }\n\n  loginError = () => {\n    if(this.state.valid != false){\n      return null;\n    }\n    return (<p><i><font color=\"#CD5C5C\">Incorrect login credentials!</font></i></p>);\n  }\n\n  setGroupStaff = () => {\n    this.setState({group: \"Staff\", step: \"Staff\"});\n  }\n\n  setGroupStudents = () => {\n    this.setState({group: \"Students\", step: \"Students\"});\n  }\n\n  setGroupPartners = () => {\n    this.setState({group: \"Partners\", step: \"Partners\"});\n  }\n\n\n  render() {\n      if(this.state.step==null){\n        return(\n            <div className=\"center-me\">\n            <Column horizontal='center' flexGrow={1}>\n\n\n              <Row horizontal='center'>\n                  <h2>Login to your workspace</h2>\n              </Row>\n\n              <Row horizontal='center'>\n                <Form onSubmit = {this.sendWorkspace}>\n                  <Form.Group controlId=\"formWorkspace\">\n                    <Form.Label>Workspace name</Form.Label>\n                    <Form.Control required type=\"text\" placeholder=\"Enter workspace name\" />\n                  </Form.Group>\n                  \n                  {this.workspaceError()}\n\n                  <Row horizontal='center'>\n                    <Button variant=\"primary\" type=\"submit\">Go!</Button>\n                  </Row>\n\n                  <Row horizontal = 'center'>\n                    <GoogleLogin\n                      clientId=\"273539098251-5nhctai82l0ram9s38gkp7s22ahc4lui.apps.googleusercontent.com\"\n                      buttonText=\"Login with Google\"\n                      onSuccess={this.responseGoogleSucceed}\n                      onFailure={this.responseGoogleFail}\n                      cookiePolicy={'single_host_origin'}\n                    />\n                  </Row>\n\n                </Form>\n              </Row>\n\n            </Column>\n\n          </div>\n        )\n      } else if(this.state.step == \"LoginAs\") {\n          return (\n            <div className='center-me'>\n\n              <Column flexGrow={1}>\n                <Row horizontal='center'>\n                  <h1> Which are you logging in as? </h1>\n                </Row>\n\n                <Row horizontal='center'>\n                  <Button onClick={this.setGroupStaff}>Staff</Button>\n                </Row>\n\n                <Row horizontal='center'>\n                  <Button onClick={this.setGroupPartners}>Partner</Button>\n                </Row>\n\n                <Row horizontal='center'>\n                  <Button onClick={this.setGroupStudents}>Student</Button>\n                </Row>\n\n              </Column>\n\n            </div>\n          );\n      } else{\n        return (\n          <div className='center-me'>\n\n            <Column horizontal='center' flexGrow={1}>\n\n\n              <Row horizontal='center'>\n                  <h1>{this.state.group}</h1>\n              </Row>\n\n              <Row horizontal='center'>\n                <Form onSubmit = {this.sendLogin}>\n                  <Form.Group controlId=\"formEmail\">\n                    <Form.Label>Email address</Form.Label>\n                    <Form.Control required type=\"email\" placeholder=\"Enter email\" />\n                  </Form.Group>\n\n                  <Form.Group controlId=\"formPassword\">\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control required type=\"password\" placeholder=\"Enter password\" />\n                  </Form.Group>\n                  \n                  {this.loginError()}\n\n                  <Row horizontal='center'>\n                    <Button variant=\"primary\" type=\"submit\">Login!</Button>\n                  </Row>\n\n                  <Row horizontal = 'center'>\n                    <p><b><font color = \"lightgray\">-OR-</font></b></p>\n                  </Row>\n\n                  <GoogleLogin\n                    clientId=\"273539098251-5nhctai82l0ram9s38gkp7s22ahc4lui.apps.googleusercontent.com\"\n                    buttonText=\"Login with Google\"\n                    onSuccess={this.responseGoogleSucceed}\n                    onFailure={this.responseGoogleFail}\n                    cookiePolicy={'single_host_origin'}\n                  />\n\n\n                </Form>\n              </Row>\n\n            </Column>\n          </div>\n        );\n      }\n    }\n\n}\n\n\nexport default Login;\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}